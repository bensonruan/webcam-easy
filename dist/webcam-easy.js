!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.r(t);var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"user",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;a(this,e),this._webcamElement=t,this._webcamElement.width=this._webcamElement.width||640,this._webcamElement.height=this._webcamElement.height||this._webcamElement.width*(3/4),this._facingMode=n,this._webcamList=[],this._streamList=[],this._selectedDeviceId="",this._canvasElement=i,this._snapSoundElement=r,this._horizontalFlipFactor=1}var t,n,r;return t=e,(n=[{key:"getVideoInputs",value:function(e){var t=this;return this._webcamList=[],e.forEach((function(e){return"videoinput"===e.kind&&t._webcamList.push(e)})),1==this._webcamList.length&&(this._facingMode="user"),this._webcamList}},{key:"getMediaConstraints",value:function(){var e={};return""==this._selectedDeviceId?e.facingMode=this._facingMode:e.deviceId={exact:this._selectedDeviceId},{video:e,audio:!1}}},{key:"selectCamera",value:function(){var e,t=i(this._webcamList);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("user"==this._facingMode&&n.label.toLowerCase().includes("front")||"enviroment"==this._facingMode&&n.label.toLowerCase().includes("back")){this._selectedDeviceId=n.deviceId;break}}}catch(e){t.e(e)}finally{t.f()}}},{key:"flip",value:function(){this._horizontalFlipFactor*=-1,this.caliberateWebCamElement()}},{key:"caliberateWebCamElement",value:function(){this._webcamElement.style.transform=-1===this._horizontalFlipFactor?"scale(-1, 1)":""}},{key:"switchCamera",value:function(){this._facingMode="user"==this._facingMode?"enviroment":"user",this._webcamElement.style.transform="",this.selectCamera()}},{key:"start",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.stop(),this.info().then((function(n){return e.selectCamera(),t?e.stream():e._selectedDeviceId}))}},{key:"info",value:function(){var e=this;return navigator.mediaDevices.enumerateDevices().then((function(t){return e.getVideoInputs(t)}))}},{key:"stream",value:function(){var e=this;return navigator.mediaDevices.getUserMedia(this.getMediaConstraints()).then((function(t){return e._streamList.push(t),e._webcamElement.srcObject=t,"user"!=e._facingMode||e._isStopped||(e._horizontalFlipFactor=-1),e.caliberateWebCamElement(),delete e._isStopped,e._webcamElement.play(),e._facingMode}))}},{key:"stop",value:function(){this._streamList.forEach((function(e){return e.getTracks().forEach((function(e){return e.stop()}))})),this._isStopped=!0}},{key:"snap",value:function(){var e=this;if(null!=this._canvasElement){null!=this._snapSoundElement&&(this._snapSoundElement.onpause=function(){return e._snapSoundElement.currentTime=0},this._snapSoundElement.currentTime=0,this._snapSoundElement.play()),this._canvasElement.height=this._webcamElement.scrollHeight,this._canvasElement.width=this._webcamElement.scrollWidth;var t=this._canvasElement.getContext("2d");return-1===this._horizontalFlipFactor&&(t.translate(this._canvasElement.width,0),t.scale(-1,1)),t.clearRect(0,0,this._canvasElement.width,this._canvasElement.height),t.drawImage(this._webcamElement,0,0,this._canvasElement.width,this._canvasElement.height),this._canvasElement.toDataURL("image/png")}throw"canvas element is missing"}},{key:"facingMode",get:function(){return this._facingMode},set:function(e){this._facingMode=e}},{key:"webcamList",get:function(){return this._webcamList}},{key:"webcamCount",get:function(){return this._webcamList.length}},{key:"selectedDeviceId",get:function(){return this._selectedDeviceId}}])&&o(t.prototype,n),r&&o(t,r),e}();window.Webcam=s,t.default=s}]);